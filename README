README

Download all files. Run installer.sh. It will install Hugin and enblend, create the proper folder structure (/home/pi/Documents/Time-Lapse Software and /home/pi/Time-Lapses) and move the other files to their proper place. run-timelapse.sh, stitch-pictures.sh, take-pictures.py and template.pto will be moved to the Time-Lapse Software folder. Time-lapses that you take will be saved within the Time-Lapse folder. 


If the installer does not work:
Open your browser on the Pi and navigate to: https://packages.debian.org/jessie/hugin-tools
This page is the repository for Hugin tools in Debian. Scroll down to the bottom and choose armhf. Pick your region and favorite downloader. I used the ftp.us.debian.org/debian link without issue. When it finishes, launch the installer. 
Install enblend: sudo apt-get install enblend




HOW TO USE

On your computer, build a template in Hugin. This can be done the same way you'd make a panorama. When you have it perfect, save the project as template.pto and copy it to the Pi. The existing template.pto is a sample template I made, which you can use with the sample photos to get a feel for how this program works. 

This program assumes you have Arducam's camera splitter (arducam.com/multi-camera-adapter-module-raspberry-pi/) attached to your Pi with all 4 cameras connected. The number of cameras is scallable by changing the 'take-pictures.py' file. Documentation on how to change number of cameras can be found at Arducam's website. 


run-timelapse.sh creates a new folder inside /home/pi/Time-Lapses/ with the current date and time, and then kicks off 'take-pictures.py' and 'stitch-pictures.py'. 

'take-pictures.py' iterates through each camera and takes a photo. It takes about 3 seconds per camera to take a picture. The command prompt window will update you with it's progress. Each photo is saved as capture_1.jpg, capture_2.jpg...capture_4.jpg in a round_# folder. Round refers to how many photosets have been taken. The first round is Round 1. 

This starts stitch-pictures.py, which uses Hugin's command line tools and the template you created to create a panorama. This produces panoramas very consistently. Any defects or tears present in the template will be propagated to any future panoramas, which is why it's so important to make the template as perfect as possible. With this setup, Hugin does NOT calculate control points to find the overlap in the images, which saves time and processing power, and means you don't need to worry about people moving between cameras' views or other issues that might cause stitching problems. On the other hand, Hugin is basically running blind. If your photos don't line up nicely, it won't care - you'll get a funky panorama. 

The stitching program creates a series of temporary tifs in the Software folder with the proper distortions. It uses these to create the final panorama tif for this photoset, titled round#.tif. This large image is then copied to the folder labeled "tifs" within /home/pi/Time-Lapses/TodaysDateTime/. The temporary tifs are then auto-deleted. When the round is finished, the window will notify you of its completion and how long it took. On a Raspberry Pi 3, my preliminary tests averaged about 90 seconds/round. If you'd like to change the photo frequency, open 'run-timelapse.sh' in your favorite editor and change the INTERVAL at the top. By default, it will wait 1 minute in between rounds. 



You can run a time-lapse for however long you'd like. When you are finished, copy the tifs folder to your computer. Import them into Adobe Premiere as frames (https://forums.creativecow.net/thread/3/980625) and export your time-lapse. Upload your video to Youtube and then it should be viewable with Google Cardboard (https://support.google.com/youtube/answer/6239930?hl=en)



Learn more about this project at http://dcc.umd.edu/portfolio/bbock/